<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SDK é›†æˆæµ‹è¯•å°</title>
    <style>
      body {
        font-family: sans-serif;
        padding: 20px;
        max-width: 800px;
        margin: 0 auto;
      }
      .card {
        border: 1px solid #ddd;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 20px;
      }
      button {
        padding: 8px 16px;
        cursor: pointer;
        background: #007bff;
        color: white;
        border: none;
        border-radius: 4px;
      }
      button:hover {
        background: #0056b3;
      }
      code {
        background: #f4f4f4;
        padding: 2px 5px;
        border-radius: 3px;
      }
    </style>
  </head>
  <body>
    <h1>ğŸ“Š è¡Œä¸ºç›‘æ§ SDK æµ‹è¯•å°</h1>
    <p>è¯·ç¡®ä¿ <code>node test/server.js</code> æ­£åœ¨è¿è¡Œã€‚</p>

    <div class="card">
      <h3>1. ç‚¹å‡»è¡Œä¸ºæµ‹è¯•</h3>
      <p>ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ï¼Œè§‚å¯Ÿç»ˆç«¯æ˜¯å¦æ”¶åˆ° <code>behavior: 'click'</code></p>
      <!-- è‡ªåŠ¨åŸ‹ç‚¹æµ‹è¯• -->
      <button data-track-click="add_to_cart">ğŸ›’ åŠ å…¥è´­ç‰©è½¦</button>
      <button data-track-click="play_video" style="background: #28a745">
        â–¶ï¸ æ’­æ”¾è§†é¢‘
      </button>
    </div>

    <div class="card">
      <h3>2. SPA è·¯ç”±ä¸åœç•™æ—¶é—´æµ‹è¯•</h3>
      <p>
        ç‚¹å‡»åˆ‡æ¢è·¯ç”±ï¼Œè§‚å¯Ÿæ˜¯å¦ä¸ŠæŠ¥ <code>behavior: 'dwell'</code> (æ—§é¡µé¢) å’Œ
        <code>behavior: 'pv'</code> (æ–°é¡µé¢)
      </p>
      <button id="route-btn">ğŸ”„ æ¨¡æ‹Ÿè·¯ç”±è·³è½¬</button>
      <p>å½“å‰è™šæ‹Ÿè·¯å¾„: <code id="path-display">/</code></p>
    </div>

    <!-- å¼•å…¥æ„å»ºåçš„ ESM æ¨¡å— -->
    <script type="module">
      import { initUserBehaviorMonitor } from '../dist/index.esm.js';

      // åˆå§‹åŒ– SDK
      initUserBehaviorMonitor({
        projectName: 'monitor-demo-v1',
        reportUrl: 'http://localhost:3000/report',
      });

      console.log('âœ… SDK å·²åˆå§‹åŒ–');

      // æ¨¡æ‹Ÿè·¯ç”±è·³è½¬é€»è¾‘
      const pathDisplay = document.getElementById('path-display');
      document.getElementById('route-btn').addEventListener('click', () => {
        const newPath = '/product/' + Math.floor(Math.random() * 1000);

        // è§¦å‘ history å˜åŒ–ï¼ŒSDK åº”è¯¥è‡ªåŠ¨æ•è·
        history.pushState({}, '', newPath);

        pathDisplay.textContent = newPath;
        console.log(`ğŸ‘‰ è·¯ç”±å·²åˆ‡æ¢è‡³: ${newPath}`);
      });
    </script>
  </body>
</html>
